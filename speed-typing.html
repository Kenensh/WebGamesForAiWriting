<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>æ¥µé€Ÿæ‰“å­—æŒ‘æˆ° - ç¶²é å°éŠæˆ²</title>
    <link rel="stylesheet" href="game-styles.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
    />
    <style>
      .typing-area {
        background: #2c3e50;
        border-radius: 15px;
        padding: 30px;
        margin: 20px 0;
        color: white;
        font-family: "Courier New", monospace;
        position: relative;
        overflow: hidden;
      }

      .target-text {
        font-size: 24px;
        line-height: 1.6;
        margin-bottom: 20px;
        min-height: 120px;
        background: rgba(255, 255, 255, 0.1);
        padding: 20px;
        border-radius: 10px;
        border: 2px solid #3498db;
      }

      .char {
        position: relative;
      }

      .char.correct {
        background-color: #27ae60;
        color: white;
      }

      .char.incorrect {
        background-color: #e74c3c;
        color: white;
      }

      .char.current {
        animation: blink 1s infinite;
        background-color: #f1c40f;
        color: #2c3e50;
      }

      @keyframes blink {
        0%,
        50% {
          opacity: 1;
        }
        51%,
        100% {
          opacity: 0.3;
        }
      }

      .typing-input {
        width: 100%;
        padding: 15px;
        font-size: 18px;
        font-family: "Courier New", monospace;
        border: 3px solid #3498db;
        border-radius: 10px;
        background: rgba(255, 255, 255, 0.9);
        outline: none;
      }

      .typing-input:focus {
        border-color: #2980b9;
        box-shadow: 0 0 15px rgba(52, 152, 219, 0.5);
      }

      .stats-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
        margin: 20px 0;
      }

      .stat-box {
        background: linear-gradient(135deg, #3498db, #2980b9);
        color: white;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      }

      .stat-value {
        font-size: 32px;
        font-weight: bold;
        margin: 10px 0;
      }

      .progress-bar {
        background: rgba(255, 255, 255, 0.2);
        height: 10px;
        border-radius: 5px;
        margin: 15px 0;
        overflow: hidden;
      }

      .progress-fill {
        background: linear-gradient(90deg, #27ae60, #2ecc71);
        height: 100%;
        width: 0%;
        transition: width 0.3s ease;
        border-radius: 5px;
      }

      .difficulty-tabs {
        display: flex;
        justify-content: center;
        margin: 20px 0;
        gap: 10px;
      }

      .difficulty-tab {
        padding: 12px 24px;
        border: none;
        border-radius: 25px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s ease;
        background: #ecf0f1;
        color: #2c3e50;
      }

      .difficulty-tab.active {
        background: linear-gradient(135deg, #e74c3c, #c0392b);
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(231, 76, 60, 0.4);
      }

      .time-pressure {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 5px;
        background: linear-gradient(90deg, #e74c3c, #f39c12, #27ae60);
        transform: scaleX(1);
        transform-origin: left;
        transition: transform 0.1s linear;
      }

      .combo-indicator {
        position: absolute;
        top: 20px;
        right: 20px;
        background: rgba(241, 196, 15, 0.9);
        color: #2c3e50;
        padding: 10px 15px;
        border-radius: 20px;
        font-weight: bold;
        font-size: 16px;
        display: none;
      }

      .combo-indicator.show {
        display: block;
        animation: pulse 0.5s ease-in-out;
      }
    </style>
  </head>
  <body>
    <div class="game-container">
      <header class="game-header">
        <div class="header-left">
          <a href="index.html" class="back-button">
            <i class="fas fa-arrow-left"></i> è¿”å›
          </a>
        </div>
        <h1 class="game-title"><i class="fas fa-keyboard"></i> æ¥µé€Ÿæ‰“å­—æŒ‘æˆ°</h1>
        <div class="header-right">
          <button id="helpButton" class="help-button">
            <i class="fas fa-question-circle"></i>
          </button>
        </div>
      </header>

      <div class="game-content">
        <div class="stats-row">
          <div class="stat-box">
            <i class="fas fa-tachometer-alt"></i>
            <div>é€Ÿåº¦ (WPM)</div>
            <div class="stat-value" id="wpm">0</div>
          </div>
          <div class="stat-box">
            <i class="fas fa-bullseye"></i>
            <div>æº–ç¢ºç‡</div>
            <div class="stat-value" id="accuracy">100%</div>
          </div>
          <div class="stat-box">
            <i class="fas fa-clock"></i>
            <div>å‰©é¤˜æ™‚é–“</div>
            <div class="stat-value" id="timeLeft">60</div>
          </div>
          <div class="stat-box">
            <i class="fas fa-star"></i>
            <div>åˆ†æ•¸</div>
            <div class="stat-value" id="score">0</div>
          </div>
        </div>

        <div class="difficulty-tabs">
          <button class="difficulty-tab active" data-difficulty="easy">
            <i class="fas fa-leaf"></i> ç°¡å–®
          </button>
          <button class="difficulty-tab" data-difficulty="normal">
            <i class="fas fa-fire"></i> æ™®é€š
          </button>
          <button class="difficulty-tab" data-difficulty="hard">
            <i class="fas fa-bolt"></i> å›°é›£
          </button>
          <button class="difficulty-tab" data-difficulty="extreme">
            <i class="fas fa-skull"></i> æ¥µé™
          </button>
        </div>

        <div class="typing-area">
          <div class="time-pressure" id="timePressure"></div>
          <div class="combo-indicator" id="comboIndicator">
            <i class="fas fa-fire"></i> é€£æ“Š x<span id="comboCount">0</span>
          </div>

          <div class="target-text" id="targetText">é»æ“Šé–‹å§‹æŒ‰éˆ•é–‹å§‹æŒ‘æˆ°ï¼</div>

          <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
          </div>

          <input
            type="text"
            class="typing-input"
            id="typingInput"
            placeholder="åœ¨é€™è£¡è¼¸å…¥..."
            disabled
          />
        </div>

        <div class="game-controls">
          <button id="startButton" class="control-button start">
            <i class="fas fa-play"></i> é–‹å§‹æŒ‘æˆ°
          </button>
          <button id="pauseButton" class="control-button pause" disabled>
            <i class="fas fa-pause"></i> æš«åœ
          </button>
          <button id="resetButton" class="control-button reset">
            <i class="fas fa-redo"></i> é‡æ–°é–‹å§‹
          </button>
        </div>
      </div>
    </div>

    <!-- èªªæ˜æ¨¡æ…‹æ¡† -->
    <div id="helpModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2><i class="fas fa-keyboard"></i> æ¥µé€Ÿæ‰“å­—æŒ‘æˆ°èªªæ˜</h2>
          <span class="close">&times;</span>
        </div>
        <div class="modal-body">
          <h3>éŠæˆ²ç›®æ¨™</h3>
          <p>åœ¨é™å®šæ™‚é–“å…§å¿«é€Ÿä¸”æº–ç¢ºåœ°è¼¸å…¥é¡¯ç¤ºçš„æ–‡å­—ï¼ŒæŒ‘æˆ°ä½ çš„æ‰“å­—é€Ÿåº¦æ¥µé™ï¼</p>

          <h3>æ“ä½œæ–¹å¼</h3>
          <ul>
            <li>é¸æ“‡é›£åº¦ç­‰ç´š</li>
            <li>é»æ“Š <strong>é–‹å§‹æŒ‘æˆ°</strong></li>
            <li>åœ¨è¼¸å…¥æ¡†ä¸­è¼¸å…¥é¡¯ç¤ºçš„æ–‡å­—</li>
            <li>è¼¸å…¥æ­£ç¢ºæœƒé«˜äº®é¡¯ç¤º</li>
            <li>è¼¸å…¥éŒ¯èª¤æœƒç´…è‰²æ¨™ç¤º</li>
          </ul>

          <h3>é›£åº¦ç­‰ç´š</h3>
          <ul>
            <li><strong>ç°¡å–®</strong> - åŸºæœ¬å–®å­—ï¼Œ60ç§’æ™‚é™</li>
            <li><strong>æ™®é€š</strong> - å¸¸ç”¨å¥å­ï¼Œ45ç§’æ™‚é™</li>
            <li><strong>å›°é›£</strong> - è¤‡é›œæ–‡ç« ï¼Œ30ç§’æ™‚é™</li>
            <li><strong>æ¥µé™</strong> - ç¨‹å¼ç¢¼ç‰‡æ®µï¼Œ20ç§’æ™‚é™</li>
          </ul>

          <h3>è¨ˆåˆ†ç³»çµ±</h3>
          <ul>
            <li><strong>WPM</strong> - æ¯åˆ†é˜å­—æ•¸ (Words Per Minute)</li>
            <li><strong>æº–ç¢ºç‡</strong> - æ­£ç¢ºå­—ç¬¦ / ç¸½å­—ç¬¦æ•¸</li>
            <li><strong>é€£æ“Š</strong> - é€£çºŒæ­£ç¢ºè¼¸å…¥ç²å¾—åˆ†æ•¸åŠ æˆ</li>
            <li><strong>æ™‚é–“çå‹µ</strong> - æå‰å®Œæˆç²å¾—é¡å¤–åˆ†æ•¸</li>
          </ul>

          <h3>ç‰¹æ®Šæ©Ÿåˆ¶</h3>
          <ul>
            <li>é€£çºŒæ­£ç¢ºè¼¸å…¥å¯ç´¯ç©é€£æ“Šæ•¸</li>
            <li>éŒ¯èª¤è¼¸å…¥æœƒé‡ç½®é€£æ“Š</li>
            <li>é«˜é€£æ“Šæ•¸å¯ç²å¾—åˆ†æ•¸å€å¢æ•ˆæœ</li>
            <li>æ™‚é–“å£“åŠ›æ¢é¡¯ç¤ºå‰©é¤˜æ™‚é–“</li>
          </ul>

          <h3>æå‡æŠ€å·§</h3>
          <ul>
            <li>ä¿æŒæ­£ç¢ºçš„æ‰‹æŒ‡ä½ç½®</li>
            <li>å°ˆæ³¨æ–¼æº–ç¢ºæ€§ï¼Œé€Ÿåº¦æœƒè‡ªç„¶æå‡</li>
            <li>ä¸è¦çœ‹éµç›¤ï¼ŒåŸ¹é¤Šç›²æ‰“èƒ½åŠ›</li>
            <li>å®šæœŸç·´ç¿’ï¼Œå»ºç«‹è‚Œè‚‰è¨˜æ†¶</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- éŠæˆ²çµæŸæ¨¡æ…‹æ¡† -->
    <div id="gameOverModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2><i class="fas fa-trophy"></i> æŒ‘æˆ°å®Œæˆ</h2>
        </div>
        <div class="modal-body">
          <div class="game-over-stats">
            <div class="stat-item">
              <i class="fas fa-tachometer-alt"></i>
              <span>å¹³å‡é€Ÿåº¦</span>
              <span id="finalWPM">0 WPM</span>
            </div>
            <div class="stat-item">
              <i class="fas fa-bullseye"></i>
              <span>æœ€çµ‚æº–ç¢ºç‡</span>
              <span id="finalAccuracy">0%</span>
            </div>
            <div class="stat-item">
              <i class="fas fa-star"></i>
              <span>ç¸½åˆ†æ•¸</span>
              <span id="finalScore">0</span>
            </div>
            <div class="stat-item">
              <i class="fas fa-fire"></i>
              <span>æœ€é«˜é€£æ“Š</span>
              <span id="maxCombo">0</span>
            </div>
          </div>
          <div class="rating" id="performanceRating">
            <i class="fas fa-medal"></i>
            <span>è¡¨ç¾è©•ç´š</span>
          </div>
          <div class="modal-actions">
            <button id="playAgainButton" class="control-button start">
              <i class="fas fa-play"></i> å†æ¬¡æŒ‘æˆ°
            </button>
            <button id="backToMenuButton" class="control-button">
              <i class="fas fa-home"></i> å›åˆ°é¸å–®
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="gameUtils.js"></script>
    <script>
      class SpeedTypingGame {
        constructor() {
          this.gameRunning = false;
          this.gamePaused = false;
          this.difficulty = "easy";

          // éŠæˆ²çµ±è¨ˆ
          this.startTime = 0;
          this.timeLimit = 60;
          this.timeLeft = 60;
          this.currentIndex = 0;
          this.correctChars = 0;
          this.totalChars = 0;
          this.errors = 0;
          this.wpm = 0;
          this.accuracy = 100;
          this.score = 0;
          this.combo = 0;
          this.maxCombo = 0;

          // æ–‡æœ¬å…§å®¹
          this.targetText = "";
          this.textSets = {
            easy: [
              "The quick brown fox jumps over the lazy dog.",
              "Hello world! This is a simple typing test.",
              "Programming is fun and challenging to learn.",
              "Practice makes perfect in typing skills.",
              "Speed and accuracy are both important.",
            ],
            normal: [
              "In the heart of the bustling city, people rush through their daily routines, each with their own dreams and aspirations.",
              "Technology has revolutionized the way we communicate, work, and live in the modern digital age.",
              "The art of cooking combines creativity, precision, and passion to create memorable culinary experiences.",
              "Environmental conservation requires collective effort from individuals, communities, and governments worldwide.",
            ],
            hard: [
              "The implementation of artificial intelligence algorithms requires sophisticated mathematical models and computational frameworks that can process vast amounts of data efficiently.",
              "Quantum computing represents a paradigm shift in computational capabilities, leveraging principles of quantum mechanics to solve complex problems exponentially faster than classical computers.",
              "Blockchain technology introduces decentralized consensus mechanisms that eliminate the need for traditional intermediaries in digital transactions and data verification processes.",
            ],
            extreme: [
              "function fibonacci(n) { return n <= 1 ? n : fibonacci(n-1) + fibonacci(n-2); }",
              "const asyncFunction = async () => { try { const result = await fetch('/api/data'); return result.json(); } catch (error) { console.error(error); } };",
              "class LinkedList { constructor() { this.head = null; } insert(data) { const newNode = { data, next: this.head }; this.head = newNode; } }",
            ],
          };

          this.timeLimits = {
            easy: 60,
            normal: 45,
            hard: 30,
            extreme: 20,
          };

          this.init();
        }

        init() {
          this.bindEvents();
          this.updateDisplay();
        }

        bindEvents() {
          // æŒ‰éˆ•äº‹ä»¶
          document
            .getElementById("startButton")
            .addEventListener("click", () => this.startGame());
          document
            .getElementById("pauseButton")
            .addEventListener("click", () => this.togglePause());
          document
            .getElementById("resetButton")
            .addEventListener("click", () => this.resetGame());

          // é›£åº¦é¸æ“‡
          document.querySelectorAll(".difficulty-tab").forEach((tab) => {
            tab.addEventListener("click", (e) => {
              this.setDifficulty(e.target.dataset.difficulty);
            });
          });

          // è¼¸å…¥äº‹ä»¶
          const input = document.getElementById("typingInput");
          input.addEventListener("input", (e) => this.handleInput(e));
          input.addEventListener("keydown", (e) => {
            if (e.key === " " && e.ctrlKey) {
              e.preventDefault();
              this.togglePause();
            }
          });

          // æ¨¡æ…‹æ¡†äº‹ä»¶
          document
            .getElementById("playAgainButton")
            .addEventListener("click", () => {
              document.getElementById("gameOverModal").style.display = "none";
              this.resetGame();
              this.startGame();
            });

          document
            .getElementById("backToMenuButton")
            .addEventListener("click", () => {
              window.location.href = "index.html";
            });
        }

        setDifficulty(difficulty) {
          if (this.gameRunning) return;

          this.difficulty = difficulty;
          this.timeLimit = this.timeLimits[difficulty];
          this.timeLeft = this.timeLimit;

          // æ›´æ–°é›£åº¦æ¨™ç±¤æ¨£å¼
          document.querySelectorAll(".difficulty-tab").forEach((tab) => {
            tab.classList.remove("active");
          });
          document
            .querySelector(`[data-difficulty="${difficulty}"]`)
            .classList.add("active");

          this.updateDisplay();
        }

        startGame() {
          this.gameRunning = true;
          this.gamePaused = false;
          this.startTime = Date.now();
          this.selectRandomText();
          this.renderText();

          document.getElementById("startButton").disabled = true;
          document.getElementById("pauseButton").disabled = false;
          document.getElementById("typingInput").disabled = false;
          document.getElementById("typingInput").focus();

          this.startTimer();
        }

        selectRandomText() {
          const textSet = this.textSets[this.difficulty];
          this.targetText = textSet[Math.floor(Math.random() * textSet.length)];
        }

        renderText() {
          const container = document.getElementById("targetText");
          container.innerHTML = "";

          for (let i = 0; i < this.targetText.length; i++) {
            const span = document.createElement("span");
            span.className = "char";
            span.textContent = this.targetText[i];
            if (i === 0) span.classList.add("current");
            container.appendChild(span);
          }
        }

        handleInput(e) {
          if (!this.gameRunning || this.gamePaused) return;

          const input = e.target.value;
          const inputChar = input[input.length - 1];
          const targetChar = this.targetText[this.currentIndex];

          if (input.length > this.targetText.length) {
            e.target.value = input.slice(0, this.targetText.length);
            return;
          }

          // æ›´æ–°å­—ç¬¦é¡¯ç¤º
          this.updateCharDisplay(input);

          // æª¢æŸ¥å®Œæˆ
          if (input === this.targetText) {
            this.completeGame();
            return;
          }

          // è¨ˆç®—çµ±è¨ˆ
          this.calculateStats(input);
          this.updateDisplay();
        }

        updateCharDisplay(input) {
          const chars = document.querySelectorAll(".char");

          chars.forEach((char, index) => {
            char.classList.remove("correct", "incorrect", "current");

            if (index < input.length) {
              if (input[index] === this.targetText[index]) {
                char.classList.add("correct");
                if (index === input.length - 1) {
                  this.combo++;
                  this.maxCombo = Math.max(this.maxCombo, this.combo);
                  this.showCombo();
                }
              } else {
                char.classList.add("incorrect");
                this.combo = 0;
              }
            } else if (index === input.length) {
              char.classList.add("current");
            }
          });

          // æ›´æ–°é€²åº¦æ¢
          const progress = (input.length / this.targetText.length) * 100;
          document.getElementById("progressFill").style.width = progress + "%";
        }

        showCombo() {
          if (this.combo > 5) {
            const indicator = document.getElementById("comboIndicator");
            document.getElementById("comboCount").textContent = this.combo;
            indicator.classList.add("show");

            setTimeout(() => {
              indicator.classList.remove("show");
            }, 1000);
          }
        }

        calculateStats(input) {
          this.totalChars = input.length;
          this.correctChars = 0;
          this.errors = 0;

          for (let i = 0; i < input.length; i++) {
            if (input[i] === this.targetText[i]) {
              this.correctChars++;
            } else {
              this.errors++;
            }
          }

          // è¨ˆç®— WPM (å‡è¨­å¹³å‡å­—é•·ç‚º5)
          const timeElapsed = (Date.now() - this.startTime) / 1000 / 60;
          this.wpm = Math.round(
            this.correctChars / 5 / Math.max(timeElapsed, 0.01)
          );

          // è¨ˆç®—æº–ç¢ºç‡
          this.accuracy =
            this.totalChars > 0
              ? Math.round((this.correctChars / this.totalChars) * 100)
              : 100;

          // è¨ˆç®—åˆ†æ•¸
          this.score = this.correctChars * 10;
          if (this.combo > 5) {
            this.score += this.combo * 5; // é€£æ“ŠåŠ æˆ
          }
          if (this.accuracy > 95) {
            this.score = Math.round(this.score * 1.2); // é«˜æº–ç¢ºç‡åŠ æˆ
          }
        }

        startTimer() {
          this.timer = setInterval(() => {
            if (!this.gameRunning || this.gamePaused) return;

            this.timeLeft--;
            this.updateTimePressure();

            if (this.timeLeft <= 0) {
              this.timeUp();
            }
          }, 1000);
        }

        updateTimePressure() {
          const pressure = document.getElementById("timePressure");
          const percent = (this.timeLeft / this.timeLimit) * 100;
          pressure.style.transform = `scaleX(${percent / 100})`;

          // é¡è‰²è®ŠåŒ–
          if (percent > 50) {
            pressure.style.background =
              "linear-gradient(90deg, #27ae60, #2ecc71)";
          } else if (percent > 25) {
            pressure.style.background =
              "linear-gradient(90deg, #f39c12, #e67e22)";
          } else {
            pressure.style.background =
              "linear-gradient(90deg, #e74c3c, #c0392b)";
          }
        }

        togglePause() {
          this.gamePaused = !this.gamePaused;
          const pauseButton = document.getElementById("pauseButton");
          const input = document.getElementById("typingInput");

          if (this.gamePaused) {
            pauseButton.innerHTML = '<i class="fas fa-play"></i> ç¹¼çºŒ';
            input.disabled = true;
          } else {
            pauseButton.innerHTML = '<i class="fas fa-pause"></i> æš«åœ';
            input.disabled = false;
            input.focus();
          }
        }

        timeUp() {
          this.endGame("æ™‚é–“åˆ°ï¼");
        }

        completeGame() {
          clearInterval(this.timer);

          // æ™‚é–“çå‹µ
          const timeBonus = this.timeLeft * 10;
          this.score += timeBonus;

          this.endGame("å®ŒæˆæŒ‘æˆ°ï¼");
        }

        endGame(message) {
          this.gameRunning = false;
          clearInterval(this.timer);

          document.getElementById("typingInput").disabled = true;
          this.showGameOverModal(message);
        }

        showGameOverModal(message) {
          document.getElementById("finalWPM").textContent = this.wpm + " WPM";
          document.getElementById("finalAccuracy").textContent =
            this.accuracy + "%";
          document.getElementById("finalScore").textContent = this.score;
          document.getElementById("maxCombo").textContent = this.maxCombo;

          // è¡¨ç¾è©•ç´š
          const rating = this.getPerformanceRating();
          document.getElementById("performanceRating").innerHTML = `
                    <i class="fas fa-medal"></i> ${rating}
                `;

          document.getElementById("gameOverModal").style.display = "block";
        }

        getPerformanceRating() {
          if (this.wpm >= 80 && this.accuracy >= 98) return "ğŸ† æ‰“å­—å¤§å¸«";
          if (this.wpm >= 60 && this.accuracy >= 95) return "ğŸ¥‡ å„ªç§€";
          if (this.wpm >= 40 && this.accuracy >= 90) return "ğŸ¥ˆ è‰¯å¥½";
          if (this.wpm >= 25 && this.accuracy >= 85) return "ğŸ¥‰ åŠæ ¼";
          return "ğŸ“ éœ€è¦ç·´ç¿’";
        }

        resetGame() {
          this.gameRunning = false;
          this.gamePaused = false;
          clearInterval(this.timer);

          this.timeLeft = this.timeLimit;
          this.currentIndex = 0;
          this.correctChars = 0;
          this.totalChars = 0;
          this.errors = 0;
          this.wpm = 0;
          this.accuracy = 100;
          this.score = 0;
          this.combo = 0;
          this.maxCombo = 0;

          document.getElementById("startButton").disabled = false;
          document.getElementById("pauseButton").disabled = true;
          document.getElementById("pauseButton").innerHTML =
            '<i class="fas fa-pause"></i> æš«åœ';
          document.getElementById("typingInput").disabled = true;
          document.getElementById("typingInput").value = "";
          document.getElementById("targetText").textContent =
            "é»æ“Šé–‹å§‹æŒ‰éˆ•é–‹å§‹æŒ‘æˆ°ï¼";
          document.getElementById("progressFill").style.width = "0%";
          document.getElementById("timePressure").style.transform = "scaleX(1)";
          document.getElementById("timePressure").style.background =
            "linear-gradient(90deg, #27ae60, #2ecc71)";

          this.updateDisplay();
        }

        updateDisplay() {
          document.getElementById("wpm").textContent = this.wpm;
          document.getElementById("accuracy").textContent = this.accuracy + "%";
          document.getElementById("timeLeft").textContent = this.timeLeft;
          document.getElementById("score").textContent = this.score;
        }
      }

      // åˆå§‹åŒ–éŠæˆ²
      let game;

      document.addEventListener("DOMContentLoaded", function () {
        game = new SpeedTypingGame();

        // åˆå§‹åŒ–éŠæˆ²å·¥å…·
        if (typeof GameUtils !== "undefined") {
          GameUtils.initializeGame("speedTyping");
        }
      });
    </script>
  </body>
</html>
